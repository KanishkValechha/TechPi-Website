---
import { desc } from 'framer-motion/client';
import Layout from '../layouts/Layout.astro';
import PageHeader from '../components/PageHeader.astro';

const certifications = [
  {
    name: "ISO Certification",
    description: "ISO certified manufacturing processes ensuring superior quality products and services",
    icon: "âœ“",
    certificateImage: "../images/certificates/iso.png"
  },
  {
    name: "CPRI(Short Circuit) Certificate",
    description: "Certified by Central Power Research Institute for LT panels up to 6000A, 70kA fault level",
    icon: "ðŸ…",
    certificateImage: "../images/certificates/cpri.png"  // Updated path
  },
  {
    name: "Qality Research Organization Certificate",
    description: "Certified by Quality Research Organization for superior quality products and services",
    icon: "âœ“",
    certificateImage: "../images/certificates/qro.png"
  },
  {
    name: "CPRI(Temperature Test) Certificate",
    description: "Certified by Central Power Research Institute for LT panels up to 6000A, 70kA fault level",
    icon: "ðŸ…",
    certificateImage: "../images/certificates/temperature.png"
  },
  {
    name: "CPRI Provisional Test Certificate",
    description: "Certified by Central Power Research Institute for LT panels up to 6000A, 70kA fault level",
    icon: "ðŸ…",
    certificateImage: "../images/certificates/test.png"
  },
  
];

const founders = [
  {
    name: "Aruna Kumar SS",
    position: "Director",
    bio: "With over two decades of experience in electrical supply and contracting, Mr. Aruna Kumar is one of the strong pillars of Tech PI Solutions. His technical expertise and leadership has established strong client relationships and successful project delivery across India.",
    image: "/images/a.jpg"
  },
  {
    name: "Jeevana B S",
    position: "Director",
    bio: "Having 19 years of experience in the electrical supply and distribution industry, Mr. Jeevana is a visionary leader with strong determination and ethical beliefs. His passion for innovation and quality has driven successful projects both in India and overseas.",
    image: "/images/b.jpg"
  }
];

const schema = {
  "@context": "https://schema.org",
  "@type": "AboutPage",
  "mainEntity": {
    "@type": "Organization",
    "name": "Tech PI Solutions",
    "description": "Leading CPRI approved manufacturer of LT Panels and Cable Trays",
    "foundingLocation": "Hyderabad, Telangana",
    "founder": founders.map(f => ({
      "@type": "Person",
      "name": f.name,
      "jobTitle": f.position
    }))
  }
};
---

<Layout
  title="About Us | Tech PI Solutions"
  description="Learn about Tech PI Solutions' journey, our expert leadership, and our commitment to quality through CPRI approval and ISO certification."
>
  <script type="application/ld+json" set:html={JSON.stringify(schema)} />

  <PageHeader
    title="Our Services"
    description="Professional solutions for your electrical infrastructure needs"
    image="/images/facility.jpg"
  />

  <section class="py-16" id="story">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-bold mb-6">Our Story</h2>
        <div class="prose prose-lg">
          <p class="mb-4">
            Tech PI Solutions is one of the leading CPRI approved, ISO certified LT panels and Cable trays manufacturer in the industry. We are committed to providing our customers with superior quality products and services, specializing in high-quality LT panels and cable trays with superior safety features.
          </p>
          <p class="mb-4">
            Located in Hyderabad, Telangana, we are fortunate to have partners with two decades of experience in the electrical field. Our team has handled multiple complex projects and has practical experience in developing quality and unique products as per market requirements and Standards.
          </p>
          <p>
            At Tech PI Solutions, we understand that our ultimate goal is not just to provide excellent products but also to ensure customer satisfaction through dedicated after-sales service, including installation, training of personnel, servicing, and replacement of parts.
          </p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-16 bg-gray-50" id="founders">
    <div class="container mx-auto px-12">
      <h2 class="text-3xl font-bold mb-12 text-center">Our Leadership</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        {founders.map(founder => (
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <img src={founder.image} alt={founder.name} class="w-full aspect-square object-fit" />
            <div class="p-6">
              <h3 class="text-2xl font-bold mb-2">{founder.name}</h3>
              <p class="text-secondary font-semibold mb-4">{founder.position}</p>
              <p class="text-gray-600">{founder.bio}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Certificate Modal -->
  <div id="certificateModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-[1000]">
    <div class="bg-white p-4 rounded-lg max-w-4xl w-full mx-4 flex flex-col items-center overflow-auto max-h-screen relative">
      <div class="flex justify-between items-center mb-4 w-full">
        <h3 class="text-xl font-bold" id="modalTitle"></h3>
        <button id="closeModalBtn" class="text-2xl font-bold px-4 py-2 absolute top-4 right-4">&times;</button>
      </div>
      <img id="certificateImage" src="" alt="Certificate" class="w-full h-auto max-h-[80vh] object-contain" />
    </div>
  </div>

  <section class="py-16" id="certificates">
    <div class="container mx-auto px-12">
      <h2 class="text-3xl font-bold mb-12 text-center">Our Certifications</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        {certifications.map(cert => (
          <div class="bg-white rounded-lg shadow-md p-6 text-center">
            <div class="text-4xl mb-4">{cert.icon}</div>
            <h3 class="text-xl font-bold mb-2">{cert.name}</h3>
            <p class="text-gray-600 mb-4">{cert.description}</p>
            <button 
              class="certificate-btn bg-secondary text-white px-4 py-2 rounded hover:bg-opacity-90 transition-opacity"
              data-title={cert.name}
              data-image={cert.certificateImage}
            >
              View Certificate
            </button>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="bg-primary text-white py-16">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-6">Partner with Us</h2>
      <p class="text-xl mb-8 max-w-2xl mx-auto">
        Join us in our mission to provide superior quality electrical infrastructure solutions that add economical value to your business.
      </p>
      <a href="/contact" class="inline-block bg-secondary text-white px-8 py-3 rounded-lg hover:bg-opacity-90">
        Get in Touch
      </a>
    </div>
  </section>

  <script type="module" astro-client-load>
    // Certificate buttons
    const buttons = document.querySelectorAll('.certificate-btn');
    buttons.forEach(button => {
      button.addEventListener('click', () => {
        const title = button.getAttribute('data-title');
        const imageSrc = button.getAttribute('data-image');
        if (title && imageSrc) {
          showCertificate(title, imageSrc);
        }
      });
    });

    // Close button
    const closeBtn = document.getElementById('closeModalBtn');
    closeBtn?.addEventListener('click', (e) => {
      e.stopPropagation();
      closeCertificateModal();
    });

    // Modal background click
    const modal = document.getElementById('certificateModal');
    modal?.addEventListener('click', (e) => {
      if (e.target === modal) {
        closeCertificateModal();
      }
    });

    function showCertificate(title, imageSrc) {
      const modal = document.getElementById('certificateModal');
      const modalTitle = document.getElementById('modalTitle');
      const certificateImage = document.getElementById('certificateImage');
      
      if (modal && modalTitle && certificateImage) {
        modalTitle.textContent = title;
        certificateImage.src = imageSrc;
        modal.classList.remove('hidden');
        modal.classList.add('flex');
      }
    }

    function closeCertificateModal() {
      const modal = document.getElementById('certificateModal');
      modal?.classList.add('hidden');
      modal?.classList.remove('flex');
    }

    function handleModalClick(event) {
      if (event.target.id === 'certificateModal') {
        closeCertificateModal();
      }
    }
  </script>
</Layout>